{extend name="base/base" /}
{block name="title"}标题{/block}

{block name="left"}

{include file="base/left_menu" /}

{/block}


{block name="main"}


<!-- main content start-->
<div class="main-content">

	<!-- header section start-->
	<div class="header-section">

		<!--toggle button start-->:
		<a class="toggle-btn"><i class="fa fa-bars"></i></a>
		<!--toggle button end-->

		<!--搜索开始-->
		<form class="searchform" action="index.html" method="post">
			<input type="text" class="form-control" name="keyword" placeholder="Search here..." />
		</form>
		<!--搜索结束-->

		<!--导航（通知）菜单开始notification menu start -->
		<div class="menu-right">
			<ul class="notification-menu">
				<li>
					<a href="#" class="btn btn-default dropdown-toggle info-number" data-toggle="dropdown">
						<i class="fa fa-tasks"></i>
						<span class="badge">8</span>
					</a>
					<div class="dropdown-menu dropdown-menu-head pull-right">
						<h5 class="title">你有8门需要考试的科目</h5>
						<ul class="dropdown-list user-list">
							<li class="new">
								<a href="#">
									<div class="task-info">
										<div>JavaEE企业级开发考试</div>
									</div>
								</a>
							</li>
							<li class="new">
								<a href="#">
									<div class="task-info">
										<div>大学英语4</div>
									</div>
								</a>
							</li>
							<li>
								<a href="#">
									<div class="task-info">
										<div>高等数学</div>
									</div>
								</a>
							</li>


							<li class="new"><a href="">查看所有考试</a></li>
						</ul>
					</div>
				</li>
				<li>
					<a href="#" class="btn btn-default dropdown-toggle info-number" data-toggle="dropdown">
						<i class="fa fa-envelope-o"></i>
						<span class="badge">5</span>
					</a>
					<div class="dropdown-menu dropdown-menu-head pull-right">
						<h5 class="title">你有5条未读消息</h5>
						<ul class="dropdown-list normal-list">
							<li class="new">
								<a href="">
									<span class="thumb"><img src="images/photos/user1.png" alt="" /></span>
									<span class="desc">
													<span class="name">John Doe <span class="badge badge-success">new</span></span>
													<span class="msg">Lorem ipsum dolor sit amet...</span>
												</span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="thumb"><img src="images/photos/user2.png" alt="" /></span>
									<span class="desc">
													<span class="name">Jonathan Smith</span>
													<span class="msg">Lorem ipsum dolor sit amet...</span>
												</span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="thumb"><img src="images/photos/user3.png" alt="" /></span>
									<span class="desc">
													<span class="name">Jane Doe</span>
													<span class="msg">Lorem ipsum dolor sit amet...</span>
												</span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="thumb"><img src="images/photos/user4.png" alt="" /></span>
									<span class="desc">
													<span class="name">Mark Henry</span>
													<span class="msg">Lorem ipsum dolor sit amet...</span>
												</span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="thumb"><img src="images/photos/user5.png" alt="" /></span>
									<span class="desc">
													<span class="name">Jim Doe</span>
													<span class="msg">Lorem ipsum dolor sit amet...</span>
												</span>
								</a>
							</li>
							<li class="new"><a href="">Read All Mails</a></li>
						</ul>
					</div>
				</li>
				<li>
					<a href="#" class="btn btn-default dropdown-toggle info-number" data-toggle="dropdown">
						<i class="fa fa-bell-o"></i>
						<span class="badge">4</span>
					</a>
					<div class="dropdown-menu dropdown-menu-head pull-right">
						<h5 class="title">Notifications</h5>
						<ul class="dropdown-list normal-list">
							<li class="new">
								<a href="">
									<span class="label label-danger"><i class="fa fa-bolt"></i></span>
									<span class="name">Server #1 overloaded. </span>
									<em class="small">34 mins</em>
								</a>
							</li>
							<li class="new">
								<a href="">
									<span class="label label-danger"><i class="fa fa-bolt"></i></span>
									<span class="name">Server #3 overloaded. </span>
									<em class="small">1 hrs</em>
								</a>
							</li>
							<li class="new">
								<a href="">
									<span class="label label-danger"><i class="fa fa-bolt"></i></span>
									<span class="name">Server #5 overloaded. </span>
									<em class="small">4 hrs</em>
								</a>
							</li>
							<li class="new">
								<a href="">
									<span class="label label-danger"><i class="fa fa-bolt"></i></span>
									<span class="name">Server #31 overloaded. </span>
									<em class="small">4 hrs</em>
								</a>
							</li>
							<li class="new"><a href="">See All Notifications</a></li>
						</ul>
					</div>
				</li>
				<li>
					<a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
						<img src="images/photos/user-avatar.png" alt="" />
						zrlee
						<span class="caret"></span>
					</a>
					<ul class="dropdown-menu dropdown-menu-usermenu pull-right">
						<li><a href="#"><i class="fa fa-user"></i>个人信息</a></li>
						<li><a href="#"><i class="fa fa-cog"></i>设置</a></li>
						<li><a href="#"><i class="fa fa-sign-out"></i>退出登录</a></li>
					</ul>
				</li>

			</ul>
		</div>
		<!--导航菜单结束notification menu end -->

	</div>
	<!-- header section end-->

	<!-- page heading start-->
	<div class="page-heading">
		<h3>
			新增试题
		</h3>
		<ul class="breadcrumb">
			<li>
				<a href="#">首页</a>
			</li>
			<li>
				<a href="#">题库管理</a>
			</li>
			<li class="active">新增试题</li>
		</ul>
	</div>
	<!-- page heading end-->
	<hr />









	<!--body wrapper start-->
	<div class="wrapper">
		<div class="row">
			<div class="col-md-12">
				<div class="square-widget">
					<div class="widget-container">
						<div class="stepy-tab">
						</div>
						<form id="default" class="form-horizontal" method="post" action="__HOME__/question/{$question.id}">
							<!--伪装put请求-->
							<input type="hidden" name="_method" value="PUT" >
							<fieldset title="新增试题">

								<div class="row">
									<div class="panel">

										<div class="panel-body">
											<!-- 第一行开始 -->
											<div class="row">

												<div class="form-group col-md-4">
													<label class="col-md-4 col-sm-4 control-label">试题类型:</label>
													<div class="col-md-6 col-sm-6">
														<select class="form-control " name="type" disabled="disabled">
															<option value="1" {if $question.type==1} selected="selected"{/if}>单选题</option>
															<option value="2" {if $question.type==2} selected="selected"{/if}> 多选题</option>
															<option value="3" {if $question.type==3} selected="selected"{/if}>判断题</option>
															<option value="4" {if $question.type==4} selected="selected"{/if}>填空题</option>
															<option value="5" {if $question.type==5} selected="selected"{/if}>简答题</option>
														</select>
													</div>
												</div>

												<div class="form-group col-md-4">
													<label class="col-md-4 col-sm-4 control-label">试题难度:</label>
													<div class="col-md-6 col-sm-6">
														<select class="form-control" name="level">
															<option value="1" {if $question.level==1} selected="selected" {/if}>非常容易</option>
															<option value="2" {if $question.level==2} selected="selected" {/if}>比较容易</option>
															<option  value="3" {if $question.level==3} selected="selected" {/if}>常规</option>
															<option value="4" {if $question.level==4} selected="selected" {/if}> 困难</option>
															<option value="5" {if $question.level==5} selected="selected" {/if}>比较困难</option>
														</select>
													</div>
												</div>

												<div class="form-group col-md-4">
													<label class="col-md-4 col-sm-4 control-label">所属题库:</label>
													<div class="col-md-6 col-sm-6">
														<select class="form-control" name="dbid">


															{volist name='qdb' id='db'}

															<option value="{$db.id}" {if $question.dbid== $db.id} selected="selected" {/if}> {$db.name}</option>
															{/volist}
														</select>
													</div>
												</div>



											</div>
											<!-- 第一行结束 -->


											<!-- 第2行开始 -->
											<div class="row">

												<div class="form-group col-md-4">
													<label class="col-md-4 col-sm-4 control-label">试题状态:</label>
													<div class="col-md-6 col-sm-6">
														<select class="form-control" name="status">
															<option value="1" {if $question.status==1} selected="selected" {/if}>开放</option>
															<option value="0" {if $question.status==0} selected="selected" {/if}>关闭</option>

														</select>
													</div>
												</div>

												<div class="form-group col-md-4">
													<label class="col-md-4 col-sm-4 control-label">试题来源:</label>
													<div class="col-md-8 col-sm-8">
														<div class="col-md-12 col-sm-12">
															<input type="text" placeholder="来源" name="from" class="form-control">
														</div>
													</div>
												</div>





											</div>
											<!-- 第2行结束 -->

											<!-- kineditor开始 -->
											<div class="form-group col-md-12  text-left">
												<div class="">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">试题题干:</label>
													<br>
													<textarea name="title" style="width:700px;height:200px;visibility:hidden;">{$question.title}</textarea>
												</div>


											</div>


											<!-- kineditor结束 -->

											<!-- 单选选项设置开始 -->
											{if $question.type==1}
											<div  class="form-group row col-md-12  text-left item-options item-single">
												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">选项设置:</label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="radio" name="key" {if $question.key=='A'} checked="checked" {/if}value="A" required="required" />
															选项A</div>
														<div class="col-md-9">
																		<textarea name="item[]"  rows="5" style="height: 80px;" draggable="false" class="form-control">
																			{$items[0]}
																		</textarea>
														</div>

													</div>


												</div>
												<!-- 选项 -->



												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="radio" name="key" {if $question.key=='B'} checked="checked" {/if}  value="B"  required="required"/>
															选项B</b></div>
														<div class="col-md-9">
																		<textarea name="item[]" rows="5" style="height: 80px;" draggable="false" class="form-control">
																															{$items[1]}		</textarea>
														</div>

													</div>


												</div>
												<!-- 选项 -->

												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>

													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="radio" name="key" {if $question.key=='C'} checked="checked" {/if}  value="C" required="required" />
															选项C</b></div>
														<div class="col-md-9">
																		<textarea name="item[]" rows="5" style="height: 80px;" draggable="false" class="form-control">
																									{$items[2]}																							</textarea>
														</div>

													</div>


												</div>
												<!-- 选项 -->


												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="radio" name="key" {if $question.key=='D'} checked="checked" {/if} value="D" required="required" />
															选项D</div>
														<div class="col-md-9">
																		<textarea name="item[]" rows="5" style="height: 80px;" draggable="false" class="form-control">
																					{$items[3]}
																		</textarea>
														</div>

													</div>


												</div>
												<!-- 选项 -->

											</div>

											{/if}

											<!-- 单选选项设置结束 -->


											{if $question.type==2}
											<!-- 多选选项设置开始 -->
											<div class="form-group row col-md-12  text-left item-options item-more" style="display:none;" >
												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">选项设置:</label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="checkbox" {in name="A" value="$question['key']" } checked="checked" {/in} name="key[]" value="A" />
															选项A</div>
														<div class="col-md-9">
																		<input  rows="5" style="height: 80px;" name="item[]" value="{$items[0]}"  draggable="false" class="form-control">

														</div>

													</div>


												</div>
												<!-- 选项 -->



												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="checkbox"  {in name="B" value="$question['key']" } checked="checked" {/in} name="key[]" id="" value="B" />
															选项B</b></div>
														<div class="col-md-9">
																		<input rows="5" style="height: 80px;" name="item[]" value="{$items[1]}"  draggable="false" class="form-control">
																																	</input>
														</div>

													</div>


												</div>
												<!-- 选项 -->

												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="checkbox"   {in name="C" value="$question['key']" } checked="checked" {/in} name="key[]" id="" value="C" />
															选项C</b></div>
														<div class="col-md-9">
																		<input rows="5" style="height: 80px;" name="item[]"  value="{$items[2]}" draggable="false" class="form-control">
																																																</input>
														</div>

													</div>


												</div>
												<!-- 选项 -->


												<!-- 选项 -->
												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>


													<div class="col-md-10" style="margin-top: 28px;">
														<div class=" pull-left" style="display: inline-block;"><input type="checkbox"  {in name="D" value="$question['key']" } checked="checked" {/in} name="key[]" id="" value="D" />
															选项D</div>
														<div class="col-md-9">
																		<input type="text" rows="5" style="height: 80px;" name="item[]" value="{$items[3]}" draggable="false" class="form-control">
																																																															</input>
														</div>

													</div>


												</div>
												<!-- 选项 -->

											</div>
											{/if}


											<!-- 多选选项设置结束 -->


											{if $question.type==3}
											<!-- 判断题开始 -->
											<div class="row item-options item-panduan" style="display: none;">


												<div class="col-md-12">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">答案设置:</label>


													<div class="col-md-10" style="margin-top: 28px;">


														<div class=" pull-left" style="display: inline-block;"><input type="radio" name="key" {if $question.key=='Y'} checked="checked" {/if} required="required" value="Y" />
															正确</b></div>

														<div class=" pull-left" style="display: inline-block;margin-left: 20px;"><input type="radio"  {if $question.key=='N'} checked="checked" {/if} required="required" name="key"
																																		id="" value="N" />
															错误</b></div>



													</div>


												</div>
											</div>
											<!-- 判断题结束 -->
											{/if}


											{if $question.type==4}
											<!-- 填空题 -->

											<div class="form-group col-md-12  text-left item-options item-kong" style="display: none;">
												<div class="">
													<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">参考答案:</label>
													<br>
													<textarea name="key" style="width:700px;height:200px;visibility:hidden;">{$question['key']}</textarea>
												</div>


											</div>
											{/if}

											<div class="row ">


												<!--<div class="col-md-12" style="display: none;">-->
													<!--<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">选项设置:</label>-->

													<!--<div class="btn btn-primary" style="margin-top: 26px;">-->
														<!--增加填空-->
													<!--</div>-->
													<!--<div class="row">-->

														<!--<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;"></label>-->

														<!--<div class=" pull-left" style="display: inline-block;margin-top: 14px;">-->
															<!--1.</div>-->
														<!--<div class="col-md-5" style="margin-top: 10px;">-->
															<!--<input type="text" name="key" id="" value="" class="form-control" />-->

														<!--</div>-->



													<!--</div>-->
												<!--</div>-->


												<!-- 填空题 -->



												<!--简答题题干开始 -->
												<!--<div class="form-group col-md-12  text-left item-options " style="display: none;">-->
													<!--<div class="">-->
														<!--<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">试题题干:</label>-->
														<!--<br>-->
														<!--<textarea name="title" style="width:700px;height:200px;visibility:hidden;">简答题题干</textarea>-->
													<!--</div>-->


												<!--</div>-->
												<!-- 简答题题干结束 -->


												<!--简答题答案开始 -->
												<div class="form-group col-md-12  text-left item-options item-jianda" style="display: none;">
													<div class="">
														<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">简答答案:</label>
														<br>
														<textarea name="key" style="width:700px;height:200px;visibility:hidden;">简答题答案</textarea>
													</div>


												</div>
												<!-- 简答题答案结束 -->

												<!-- 解析开始 -->
												<div class="form-group col-md-12  text-left" >
													<div class="">
														<label class="control-label col-md-2" style="margin-left: -80px;margin-top: 20px;">题目解析:</label>
														<br>
														<textarea name="resolve" style="width:700px;height:200px;visibility:hidden;">{$question['resolve']}</textarea>
													</div>


												</div>


												<!-- 解析结束 -->



												<!-- 提交按钮开始 -->
												<div class="form-group">
													<label class="col-md-2 col-sm-2 control-label">&nbsp;</label>
													<div class="col-md-6 col-sm-6">
														<input type="submit" class="btn btn-success btn-lg" value="提交" style="width: 80px;">
													</div>
												</div>
												<!-- 提交按钮结束 -->



											</div>
										</div>

									</div>
								</div>






							</fieldset>


						</form>
					</div>
				</div>
			</div>
		</div>

	</div>
	<!--body wrapper end-->

	<!--footer section start-->
	<footer class="sticky-footer">
		2019 &copy; AdminEx by ThemeBucket
	</footer>
	<!--footer section end-->


</div>


<script charset="utf-8" src="__STATIC__/editor/kindeditor-min.js"></script>
<script charset="utf-8" src="__STATIC__/editor/lang/zh_CN.js"></script>
<script charset="utf-8" src="__STATIC__/js/jquery-1.10.2.min.js"></script>

<script>
	var editor;
	KindEditor.ready(function(K) {
		editor = K.create('textarea', {
			resizeType: 1,
			allowPreviewEmoticons: false,
			allowImageUpload: false,
			items: [
				'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
				'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
				'insertunorderedlist', '|', 'emoticons', 'image', 'link'
			]
		});
		// editor = K.create('textarea[name="resolve"]', {
		// 	resizeType: 1,
		// 	allowPreviewEmoticons: false,
		// 	allowImageUpload: false,
		// 	items: [
		// 		'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
		// 		'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
		// 		'insertunorderedlist', '|', 'emoticons', 'image', 'link'
		// 	]
		// });
	});
</script>

<!--试题类型选择事件-->
<script>
	$(function(){

		const qtype = $('select[name="type"]').val() ;
        $('.item-options').hide()
        disableForm('.item-more')
        disableForm('.item-single')
        disableForm('.item-panduan')
        disableForm('.item-kong')
        disableForm('.item-jianda')
        if (qtype==1){
            $('.item-single').show()
            // 其他的表单不提交
            disableForm('.item-more')
            disableForm('.item-panduan')
            disableForm('.item-kong')
            disableForm('.item-jianda')
            ableForm('.item-single')
        }else if (qtype==2){
            $('.item-more').show()

            disableForm('.item-single')
            disableForm('.item-panduan')
            disableForm('.item-kong')
            disableForm('.item-jianda')
            ableForm('.item-more')
        }else if (qtype==3){
            // 判断题
            $('.item-panduan').show()
            disableForm('.item-single')
            disableForm('.item-more')
            disableForm('.item-kong')
            disableForm('.item-jianda')
            ableForm('.item-panduan')
        }else if (qtype==4){
            // 填空
            $('.item-kong').show()

            disableForm('.item-single')
            disableForm('.item-more')
            disableForm('.item-panduan')
            disableForm('.item-jianda')
            ableForm('.item-kong')
        }else if (qtype==5){
            $('.item-jianda').show()
            disableForm('.item-single')
            disableForm('.item-more')
            disableForm('.item-panduan')
            disableForm('.item-kong')
            ableForm('.item-jianda')
        }


	})


	function disableForm(cls){
		$(cls).find("input").attr("disabled", 'disabled');
		$(cls).find("textarea").attr("disabled", 'disabled');

	}

	function ableForm(cls) {
		$(cls).find("input").removeAttr('disabled');
		$(cls).find("textarea").removeAttr('disabled');
	}
</script>
<!-- main content end-->

{/block}
